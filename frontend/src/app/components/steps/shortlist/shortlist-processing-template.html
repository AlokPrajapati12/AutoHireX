<!-- PRODUCTION-LEVEL AI SHORTLISTING WITH ANIMATIONS -->

<!-- Processing State with Advanced Animations -->
<div *ngIf="isProcessing" class="ai-processing-container">
  <div class="processing-card">
    
    <!-- Animated Header -->
    <div class="animated-header">
      <div class="header-content">
        <div class="icon-wrapper">
          <mat-icon>auto_awesome</mat-icon>
        </div>
        <div>
          <h1>AI-Powered Shortlisting</h1>
          <p>Intelligent candidate analysis in progress</p>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="processing-content">
      
      <!-- Central Animated Icon with Pulsing Rings -->
      <div class="icon-animation-center">
        <div class="icon-container">
          <!-- Pulsing Rings -->
          <div class="pulse-ring"></div>
          <div class="pulse-ring"></div>
          <div class="pulse-ring"></div>
          
          <!-- Main Icon -->
          <div class="main-icon">
            <mat-icon>psychology</mat-icon>
          </div>
          
          <!-- Orbiting Particles -->
          <div class="orbit-particle particle-1"></div>
          <div class="orbit-particle particle-2"></div>
          <div class="orbit-particle particle-3"></div>
          <div class="orbit-particle particle-4"></div>
        </div>
      </div>

      <!-- Current Step Info -->
      <div class="step-info">
        <h2>{{ currentStep }}</h2>
        <p>{{ currentStepDetails }}</p>
      </div>

      <!-- Progress Bar with Shimmer -->
      <div class="progress-section">
        <div class="progress-bar-wrapper">
          <div class="progress-fill" [style.width.%]="progress"></div>
        </div>
        <div class="progress-labels">
          <span class="progress-percent">{{ progress }}% Complete</span>
          <span class="progress-time">
            Estimated: {{ Math.max(0, Math.ceil((100 - progress) / 10)) }}s remaining
          </span>
        </div>
      </div>

      <!-- Stats Grid -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-number">{{ totalCandidates }}</div>
          <div class="stat-label">Total Candidates</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-number">{{ processedCount }}</div>
          <div class="stat-label">Processed</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-number">{{ Math.min(Math.floor(progress / 33), 3) }}</div>
          <div class="stat-label">Shortlisted</div>
        </div>
      </div>

      <!-- Step Indicators -->
      <div class="step-indicators">
        <!-- Step 1: Loading -->
        <div class="step-item">
          <div class="step-icon-wrapper" 
               [class.active]="progress >= 0 && progress < 20"
               [class.completed]="progress >= 20">
            <mat-icon>{{ progress >= 20 ? 'check_circle' : 'people' }}</mat-icon>
          </div>
          <div class="step-label" 
               [class.active]="progress >= 0 && progress < 20"
               [class.completed]="progress >= 20">
            Loading
          </div>
        </div>

        <!-- Step 2: Analyzing -->
        <div class="step-item">
          <div class="step-icon-wrapper" 
               [class.active]="progress >= 20 && progress < 40"
               [class.completed]="progress >= 40">
            <mat-icon>{{ progress >= 40 ? 'check_circle' : 'psychology' }}</mat-icon>
          </div>
          <div class="step-label" 
               [class.active]="progress >= 20 && progress < 40"
               [class.completed]="progress >= 40">
            Analyzing
          </div>
        </div>

        <!-- Step 3: Matching -->
        <div class="step-item">
          <div class="step-icon-wrapper" 
               [class.active]="progress >= 40 && progress < 60"
               [class.completed]="progress >= 60">
            <mat-icon>{{ progress >= 60 ? 'check_circle' : 'compare_arrows' }}</mat-icon>
          </div>
          <div class="step-label" 
               [class.active]="progress >= 40 && progress < 60"
               [class.completed]="progress >= 60">
            Matching
          </div>
        </div>

        <!-- Step 4: Scoring -->
        <div class="step-item">
          <div class="step-icon-wrapper" 
               [class.active]="progress >= 60 && progress < 80"
               [class.completed]="progress >= 80">
            <mat-icon>{{ progress >= 80 ? 'check_circle' : 'trending_up' }}</mat-icon>
          </div>
          <div class="step-label" 
               [class.active]="progress >= 60 && progress < 80"
               [class.completed]="progress >= 80">
            Scoring
          </div>
        </div>

        <!-- Step 5: Ranking -->
        <div class="step-item">
          <div class="step-icon-wrapper" 
               [class.active]="progress >= 80"
               [class.completed]="progress >= 100">
            <mat-icon>{{ progress >= 100 ? 'check_circle' : 'emoji_events' }}</mat-icon>
          </div>
          <div class="step-label" 
               [class.active]="progress >= 80"
               [class.completed]="progress >= 100">
            Ranking
          </div>
        </div>
      </div>

      <!-- AI Features Section -->
      <div class="ai-features-section">
        <div class="section-header">
          <mat-icon>flash_on</mat-icon>
          <h3>AI-Powered Analysis</h3>
        </div>
        
        <div class="features-list">
          <div class="feature-item">
            <div class="feature-dot" [class.active]="progress >= 20" [class.inactive]="progress < 20"></div>
            <span>Deep learning models analyzing resumes</span>
          </div>
          
          <div class="feature-item">
            <div class="feature-dot" [class.active]="progress >= 40" [class.inactive]="progress < 40"></div>
            <span>Natural language processing for skill extraction</span>
          </div>
          
          <div class="feature-item">
            <div class="feature-dot" [class.active]="progress >= 60" [class.inactive]="progress < 60"></div>
            <span>Semantic matching with job requirements</span>
          </div>
          
          <div class="feature-item">
            <div class="feature-dot" [class.active]="progress >= 80" [class.inactive]="progress < 80"></div>
            <span>Multi-factor scoring algorithm</span>
          </div>
        </div>
      </div>

      <!-- Fun Fact -->
      <div class="fun-fact">
        ðŸ’¡ Our AI analyzes over 50 data points per candidate to ensure the best matches
      </div>

    </div>
  </div>
</div>

<!-- Results State (Keep your existing results template) -->
<div *ngIf="processingComplete && !isProcessing">
  <!-- Your existing results HTML here -->
</div>
